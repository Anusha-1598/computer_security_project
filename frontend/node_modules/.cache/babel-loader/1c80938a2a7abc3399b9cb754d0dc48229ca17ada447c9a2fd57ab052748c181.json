{"ast":null,"code":"import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{updateDocumentName}from\"../redux/documentsSlice\";import\"./Popup.css\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const RenamePopup=_ref=>{let{fileId,fileName,onClose}=_ref;const currentUser=useSelector(state=>state.login.loginUser);const[newName,setNewName]=useState(fileName);const dispatch=useDispatch();const handleRename=()=>{fetch(\"http://127.0.0.1:3658/m1/593636-0-default/renameDocument\",{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\",\"Access-Control-Allow-Origin\":\"*\"},body:JSON.stringify({userId:currentUser,fileId:fileId})}).then(res=>{if(res.status===200){res.json().then(res=>{dispatch(updateDocumentName({fileId,newName}));});}else{alert(res.message);}onClose();}).catch(err=>{alert(\"Failed to rename document due to : \\n\"+err.message);});};return/*#__PURE__*/_jsx(\"div\",{className:\"popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-inner\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Rename Document\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newName,onChange:e=>setNewName(e.target.value)}),newName.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:\"File name not be Empty\"}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRename,children:\"Rename\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,children:\"Cancel\"})]})});};export default RenamePopup;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","updateDocumentName","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","RenamePopup","_ref","fileId","fileName","onClose","currentUser","state","login","loginUser","newName","setNewName","dispatch","handleRename","fetch","method","credentials","headers","Accept","body","JSON","stringify","userId","then","res","status","json","alert","message","catch","err","className","children","type","value","onChange","e","target","length","onClick"],"sources":["/workspaces/computer_security_project/frontend/src/components/RenamePopup.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { updateDocumentName } from \"../redux/documentsSlice\";\nimport \"./Popup.css\";\n\nconst RenamePopup = ({ fileId, fileName, onClose }) => {\n  const currentUser = useSelector((state) => state.login.loginUser);\n  const [newName, setNewName] = useState(fileName);\n  const dispatch = useDispatch();\n\n  const handleRename = () => {\n    fetch(\"http://127.0.0.1:3658/m1/593636-0-default/renameDocument\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n      body: JSON.stringify({ userId: currentUser, fileId: fileId }),\n    })\n      .then((res) => {\n        if (res.status === 200) {\n          res.json().then((res) => {\n            dispatch(updateDocumentName({ fileId, newName }));\n          });\n        } else {\n          alert(res.message);\n        }\n        onClose();\n      })\n      .catch((err) => {\n        alert(\"Failed to rename document due to : \\n\" + err.message);\n      });\n  };\n\n  return (\n    <div className=\"popup\">\n      <div className=\"popup-inner\">\n        <h2>Rename Document</h2>\n        <input\n          type=\"text\"\n          value={newName}\n          onChange={(e) => setNewName(e.target.value)}\n        />\n        {newName.length === 0 ? (\n          <p className=\"error\">File name not be Empty</p>\n        ) : (\n          <></>\n        )}\n        <button onClick={handleRename}>Rename</button>\n        <button onClick={onClose}>Cancel</button>\n      </div>\n    </div>\n  );\n};\n\nexport default RenamePopup;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,kBAAkB,KAAQ,yBAAyB,CAC5D,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErB,KAAM,CAAAC,WAAW,CAAGC,IAAA,EAAmC,IAAlC,CAAEC,MAAM,CAAEC,QAAQ,CAAEC,OAAQ,CAAC,CAAAH,IAAA,CAChD,KAAM,CAAAI,WAAW,CAAGb,WAAW,CAAEc,KAAK,EAAKA,KAAK,CAACC,KAAK,CAACC,SAAS,CAAC,CACjE,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAACa,QAAQ,CAAC,CAChD,KAAM,CAAAQ,QAAQ,CAAGpB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAqB,YAAY,CAAGA,CAAA,GAAM,CACzBC,KAAK,CAAC,0DAA0D,CAAE,CAChEC,MAAM,CAAE,MAAM,CACdC,WAAW,CAAE,SAAS,CACtBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,MAAM,CAAE,kBAAkB,CAC1B,6BAA6B,CAAE,GACjC,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,MAAM,CAAEhB,WAAW,CAAEH,MAAM,CAAEA,MAAO,CAAC,CAC9D,CAAC,CAAC,CACCoB,IAAI,CAAEC,GAAG,EAAK,CACb,GAAIA,GAAG,CAACC,MAAM,GAAK,GAAG,CAAE,CACtBD,GAAG,CAACE,IAAI,CAAC,CAAC,CAACH,IAAI,CAAEC,GAAG,EAAK,CACvBZ,QAAQ,CAAClB,kBAAkB,CAAC,CAAES,MAAM,CAAEO,OAAQ,CAAC,CAAC,CAAC,CACnD,CAAC,CAAC,CACJ,CAAC,IAAM,CACLiB,KAAK,CAACH,GAAG,CAACI,OAAO,CAAC,CACpB,CACAvB,OAAO,CAAC,CAAC,CACX,CAAC,CAAC,CACDwB,KAAK,CAAEC,GAAG,EAAK,CACdH,KAAK,CAAC,uCAAuC,CAAGG,GAAG,CAACF,OAAO,CAAC,CAC9D,CAAC,CAAC,CACN,CAAC,CAED,mBACEhC,IAAA,QAAKmC,SAAS,CAAC,OAAO,CAAAC,QAAA,cACpBhC,KAAA,QAAK+B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BpC,IAAA,OAAAoC,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBpC,IAAA,UACEqC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAExB,OAAQ,CACfyB,QAAQ,CAAGC,CAAC,EAAKzB,UAAU,CAACyB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC7C,CAAC,CACDxB,OAAO,CAAC4B,MAAM,GAAK,CAAC,cACnB1C,IAAA,MAAGmC,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,wBAAsB,CAAG,CAAC,cAE/CpC,IAAA,CAAAE,SAAA,GAAI,CACL,cACDF,IAAA,WAAQ2C,OAAO,CAAE1B,YAAa,CAAAmB,QAAA,CAAC,QAAM,CAAQ,CAAC,cAC9CpC,IAAA,WAAQ2C,OAAO,CAAElC,OAAQ,CAAA2B,QAAA,CAAC,QAAM,CAAQ,CAAC,EACtC,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA/B,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}