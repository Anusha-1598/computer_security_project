{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{setSharedDocuments,setCurrentDocument}from\"../redux/documentsSlice\";import\"./SharedDocuments.css\";import{setLoginUser}from\"../redux/loginSlice\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SharedDocuments=()=>{const dispatch=useDispatch();const navigate=useNavigate();const currentUser=useSelector(state=>state.login.loginUser);const sharedDocuments=useSelector(state=>state.documents.sharedDocuments);useEffect(()=>{// fetch(\"http://127.0.0.1:3658/m1/593636-0-default/getSharedDocuments\", {\n//   method: \"POST\",\n//   credentials: \"include\",\n//   headers: {\n//     \"Content-Type\": \"application/json\",\n//   },\n//   body: JSON.stringify({ userId: currentUser }),\n// })\n//   .then((res) => {\n//     if (res.status === 200) {\n//       res.json().then((res) => {\n//         let fetchedSharedDocuments = [...res.filesList];\n//         let l = [];\n//         for (var i = 0; i < fetchedSharedDocuments.length; i++) {\n//           let su = [];\n//           for (\n//             var j = 0;\n//             j < fetchedSharedDocuments[i].sharedUsers.length;\n//             j++\n//           ) {\n//             let obj = {\n//               ...fetchedSharedDocuments[i].sharedUsers[j],\n//             };\n//             su.push({\n//               userId: obj.userId,\n//               permissions: obj.permission.split(\",\"),\n//             });\n//           }\n//           fetchedSharedDocuments[i].sharedUsers = [...su];\n//           fetchedSharedDocuments[i].permissions =\n//             fetchedSharedDocuments[i].permissions.split(\",\");\n//           l.push(fetchedSharedDocuments[i]);\n//         }\n//         dispatch(setSharedDocuments(l));\n//       });\n//     } else {\n//       res.json().then((res) => {\n//         alert(res.message);\n//       });\n//     }\n//   })\n//   .catch((err) => {\n//     alert(\"Failed to fetch documents due to : \\n\" + err.message);\n//   });\n// fetch(\"http://127.0.0.1:5000/verifyCookie\", {\n//   method: \"POST\",\n// })\n//   .then((res) => {\n//     if (res.status === 200) {\n//       res.json().then((res) => {\n//         dispatch(setLoginUser(res.userId));\n//         fetch(\"http://127.0.0.1:5000/getSharedDocuments\", {\n//           method: \"POST\",\n//           credentials: \"include\",\n//           headers: {\n//             \"Content-Type\": \"application/json\",\n//           },\n//           body: JSON.stringify({ userId: currentUser }),\n//         })\n//           .then((res) => {\n//             if (res.status === 200) {\n//               res.json().then((res) => {\n//                 let fetchedSharedDocuments = [...res.filesList];\n//                 let l = [];\n//                 for (var i = 0; i < fetchedSharedDocuments.length; i++) {\n//                   let su = [];\n//                   for (\n//                     var j = 0;\n//                     j < fetchedSharedDocuments[i].sharedUsers.length;\n//                     j++\n//                   ) {\n//                     let obj = {\n//                       ...fetchedSharedDocuments[i].sharedUsers[j],\n//                     };\n//                     su.push({\n//                       userId: obj.userId,\n//                       permissions: obj.permission.split(\",\"),\n//                     });\n//                   }\n//                   fetchedSharedDocuments[i].sharedUsers = [...su];\n//                   fetchedSharedDocuments[i].permissions =\n//                     fetchedSharedDocuments[i].permissions.split(\",\");\n//                   l.push(fetchedSharedDocuments[i]);\n//                 }\n//                 dispatch(setSharedDocuments(l));\n//               });\n//             } else {\n//               res.json().then((res) => {\n//                 alert(res.message);\n//               });\n//             }\n//           })\n//           .catch((err) => {\n//             alert(\"Failed to fetch documents due to : \\n\" + err.message);\n//           });\n//       });\n//     } else {\n//       let goToLogin = () => dispatch(\"/login\");\n//       goToLogin();\n//       dispatch(setLoginUser(\"\"));\n//     }\n//   })\n//   .catch((err) => {\n//     alert(err.message);\n//   });\n},[dispatch]);const handleViewClick=doc=>{dispatch(setCurrentDocument(doc));navigate(\"/dashboard/view-document/\".concat(doc.fileId));};const handleEditClick=doc=>{dispatch(setCurrentDocument(doc));navigate(\"/dashboard/edit-document/\".concat(doc.fileId));};return/*#__PURE__*/_jsxs(\"div\",{className:\"shared-documents\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shared Documents\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"document-headers\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"file-name\",children:\"File Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"owner-name\",children:\"Owner\"}),/*#__PURE__*/_jsx(\"span\",{className:\"permissions\",children:\"Permissions\"}),/*#__PURE__*/_jsx(\"span\",{className:\"actions\",children:\"Actions\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:sharedDocuments.map(doc=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"document-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"file-name\",children:doc.fileName}),/*#__PURE__*/_jsx(\"span\",{className:\"owner-name\",children:doc.ownerName}),/*#__PURE__*/_jsx(\"span\",{className:\"permissions\",children:doc.permissions.join(\", \")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"document-actions\",children:[doc.permissions.includes(\"view\")&&/*#__PURE__*/_jsx(\"button\",{className:\"icon-button\",title:\"View\",onClick:()=>handleViewClick(doc),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-eye\"})}),doc.permissions.includes(\"edit\")&&/*#__PURE__*/_jsx(\"button\",{className:\"icon-button\",title:\"Edit\",onClick:()=>handleEditClick(doc),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})]})]},doc.fileId))})]});};export default SharedDocuments;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","useNavigate","setSharedDocuments","setCurrentDocument","setLoginUser","jsx","_jsx","jsxs","_jsxs","SharedDocuments","dispatch","navigate","currentUser","state","login","loginUser","sharedDocuments","documents","handleViewClick","doc","concat","fileId","handleEditClick","className","children","map","fileName","ownerName","permissions","join","includes","title","onClick"],"sources":["/workspaces/computer_security_project/frontend/src/components/SharedDocuments.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {\r\n  setSharedDocuments,\r\n  setCurrentDocument,\r\n} from \"../redux/documentsSlice\";\r\nimport \"./SharedDocuments.css\";\r\nimport { setLoginUser } from \"../redux/loginSlice\";\r\n\r\nconst SharedDocuments = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const currentUser = useSelector((state) => state.login.loginUser);\r\n  const sharedDocuments = useSelector(\r\n    (state) => state.documents.sharedDocuments\r\n  );\r\n\r\n  useEffect(() => {\r\n    // fetch(\"http://127.0.0.1:3658/m1/593636-0-default/getSharedDocuments\", {\r\n    //   method: \"POST\",\r\n    //   credentials: \"include\",\r\n    //   headers: {\r\n    //     \"Content-Type\": \"application/json\",\r\n    //   },\r\n    //   body: JSON.stringify({ userId: currentUser }),\r\n    // })\r\n    //   .then((res) => {\r\n    //     if (res.status === 200) {\r\n    //       res.json().then((res) => {\r\n    //         let fetchedSharedDocuments = [...res.filesList];\r\n    //         let l = [];\r\n    //         for (var i = 0; i < fetchedSharedDocuments.length; i++) {\r\n    //           let su = [];\r\n    //           for (\r\n    //             var j = 0;\r\n    //             j < fetchedSharedDocuments[i].sharedUsers.length;\r\n    //             j++\r\n    //           ) {\r\n    //             let obj = {\r\n    //               ...fetchedSharedDocuments[i].sharedUsers[j],\r\n    //             };\r\n    //             su.push({\r\n    //               userId: obj.userId,\r\n    //               permissions: obj.permission.split(\",\"),\r\n    //             });\r\n    //           }\r\n    //           fetchedSharedDocuments[i].sharedUsers = [...su];\r\n    //           fetchedSharedDocuments[i].permissions =\r\n    //             fetchedSharedDocuments[i].permissions.split(\",\");\r\n    //           l.push(fetchedSharedDocuments[i]);\r\n    //         }\r\n    //         dispatch(setSharedDocuments(l));\r\n    //       });\r\n    //     } else {\r\n    //       res.json().then((res) => {\r\n    //         alert(res.message);\r\n    //       });\r\n    //     }\r\n    //   })\r\n    //   .catch((err) => {\r\n    //     alert(\"Failed to fetch documents due to : \\n\" + err.message);\r\n    //   });\r\n    // fetch(\"http://127.0.0.1:5000/verifyCookie\", {\r\n    //   method: \"POST\",\r\n    // })\r\n    //   .then((res) => {\r\n    //     if (res.status === 200) {\r\n    //       res.json().then((res) => {\r\n    //         dispatch(setLoginUser(res.userId));\r\n    //         fetch(\"http://127.0.0.1:5000/getSharedDocuments\", {\r\n    //           method: \"POST\",\r\n    //           credentials: \"include\",\r\n    //           headers: {\r\n    //             \"Content-Type\": \"application/json\",\r\n    //           },\r\n    //           body: JSON.stringify({ userId: currentUser }),\r\n    //         })\r\n    //           .then((res) => {\r\n    //             if (res.status === 200) {\r\n    //               res.json().then((res) => {\r\n    //                 let fetchedSharedDocuments = [...res.filesList];\r\n    //                 let l = [];\r\n    //                 for (var i = 0; i < fetchedSharedDocuments.length; i++) {\r\n    //                   let su = [];\r\n    //                   for (\r\n    //                     var j = 0;\r\n    //                     j < fetchedSharedDocuments[i].sharedUsers.length;\r\n    //                     j++\r\n    //                   ) {\r\n    //                     let obj = {\r\n    //                       ...fetchedSharedDocuments[i].sharedUsers[j],\r\n    //                     };\r\n    //                     su.push({\r\n    //                       userId: obj.userId,\r\n    //                       permissions: obj.permission.split(\",\"),\r\n    //                     });\r\n    //                   }\r\n    //                   fetchedSharedDocuments[i].sharedUsers = [...su];\r\n    //                   fetchedSharedDocuments[i].permissions =\r\n    //                     fetchedSharedDocuments[i].permissions.split(\",\");\r\n    //                   l.push(fetchedSharedDocuments[i]);\r\n    //                 }\r\n    //                 dispatch(setSharedDocuments(l));\r\n    //               });\r\n    //             } else {\r\n    //               res.json().then((res) => {\r\n    //                 alert(res.message);\r\n    //               });\r\n    //             }\r\n    //           })\r\n    //           .catch((err) => {\r\n    //             alert(\"Failed to fetch documents due to : \\n\" + err.message);\r\n    //           });\r\n    //       });\r\n    //     } else {\r\n    //       let goToLogin = () => dispatch(\"/login\");\r\n    //       goToLogin();\r\n    //       dispatch(setLoginUser(\"\"));\r\n    //     }\r\n    //   })\r\n    //   .catch((err) => {\r\n    //     alert(err.message);\r\n    //   });\r\n  }, [dispatch]);\r\n\r\n  const handleViewClick = (doc) => {\r\n    dispatch(setCurrentDocument(doc));\r\n    navigate(`/dashboard/view-document/${doc.fileId}`);\r\n  };\r\n\r\n  const handleEditClick = (doc) => {\r\n    dispatch(setCurrentDocument(doc));\r\n    navigate(`/dashboard/edit-document/${doc.fileId}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"shared-documents\">\r\n      <h2>Shared Documents</h2>\r\n      <div className=\"document-headers\">\r\n        <span className=\"file-name\">File Name</span>\r\n        <span className=\"owner-name\">Owner</span>\r\n        <span className=\"permissions\">Permissions</span>\r\n        <span className=\"actions\">Actions</span>\r\n      </div>\r\n      <ul>\r\n        {sharedDocuments.map((doc) => (\r\n          <li key={doc.fileId}>\r\n            <div className=\"document-info\">\r\n              <span className=\"file-name\">{doc.fileName}</span>\r\n              <span className=\"owner-name\">{doc.ownerName}</span>\r\n              <span className=\"permissions\">{doc.permissions.join(\", \")}</span>\r\n            </div>\r\n            <div className=\"document-actions\">\r\n              {doc.permissions.includes(\"view\") && (\r\n                <button\r\n                  className=\"icon-button\"\r\n                  title=\"View\"\r\n                  onClick={() => handleViewClick(doc)}\r\n                >\r\n                  <i className=\"fas fa-eye\"></i>\r\n                </button>\r\n              )}\r\n              {doc.permissions.includes(\"edit\") && (\r\n                <button\r\n                  className=\"icon-button\"\r\n                  title=\"Edit\"\r\n                  onClick={() => handleEditClick(doc)}\r\n                >\r\n                  <i className=\"fas fa-edit\"></i>\r\n                </button>\r\n              )}\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SharedDocuments;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OACEC,kBAAkB,CAClBC,kBAAkB,KACb,yBAAyB,CAChC,MAAO,uBAAuB,CAC9B,OAASC,YAAY,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,KAAM,CAAAC,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAY,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAW,WAAW,CAAGZ,WAAW,CAAEa,KAAK,EAAKA,KAAK,CAACC,KAAK,CAACC,SAAS,CAAC,CACjE,KAAM,CAAAC,eAAe,CAAGhB,WAAW,CAChCa,KAAK,EAAKA,KAAK,CAACI,SAAS,CAACD,eAC7B,CAAC,CAEDlB,SAAS,CAAC,IAAM,CACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,CACD,CAAE,CAACY,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAQ,eAAe,CAAIC,GAAG,EAAK,CAC/BT,QAAQ,CAACP,kBAAkB,CAACgB,GAAG,CAAC,CAAC,CACjCR,QAAQ,6BAAAS,MAAA,CAA6BD,GAAG,CAACE,MAAM,CAAE,CAAC,CACpD,CAAC,CAED,KAAM,CAAAC,eAAe,CAAIH,GAAG,EAAK,CAC/BT,QAAQ,CAACP,kBAAkB,CAACgB,GAAG,CAAC,CAAC,CACjCR,QAAQ,6BAAAS,MAAA,CAA6BD,GAAG,CAACE,MAAM,CAAE,CAAC,CACpD,CAAC,CAED,mBACEb,KAAA,QAAKe,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BlB,IAAA,OAAAkB,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBhB,KAAA,QAAKe,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BlB,IAAA,SAAMiB,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,WAAS,CAAM,CAAC,cAC5ClB,IAAA,SAAMiB,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,OAAK,CAAM,CAAC,cACzClB,IAAA,SAAMiB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,aAAW,CAAM,CAAC,cAChDlB,IAAA,SAAMiB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,SAAO,CAAM,CAAC,EACrC,CAAC,cACNlB,IAAA,OAAAkB,QAAA,CACGR,eAAe,CAACS,GAAG,CAAEN,GAAG,eACvBX,KAAA,OAAAgB,QAAA,eACEhB,KAAA,QAAKe,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BlB,IAAA,SAAMiB,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEL,GAAG,CAACO,QAAQ,CAAO,CAAC,cACjDpB,IAAA,SAAMiB,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAEL,GAAG,CAACQ,SAAS,CAAO,CAAC,cACnDrB,IAAA,SAAMiB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEL,GAAG,CAACS,WAAW,CAACC,IAAI,CAAC,IAAI,CAAC,CAAO,CAAC,EAC9D,CAAC,cACNrB,KAAA,QAAKe,SAAS,CAAC,kBAAkB,CAAAC,QAAA,EAC9BL,GAAG,CAACS,WAAW,CAACE,QAAQ,CAAC,MAAM,CAAC,eAC/BxB,IAAA,WACEiB,SAAS,CAAC,aAAa,CACvBQ,KAAK,CAAC,MAAM,CACZC,OAAO,CAAEA,CAAA,GAAMd,eAAe,CAACC,GAAG,CAAE,CAAAK,QAAA,cAEpClB,IAAA,MAAGiB,SAAS,CAAC,YAAY,CAAI,CAAC,CACxB,CACT,CACAJ,GAAG,CAACS,WAAW,CAACE,QAAQ,CAAC,MAAM,CAAC,eAC/BxB,IAAA,WACEiB,SAAS,CAAC,aAAa,CACvBQ,KAAK,CAAC,MAAM,CACZC,OAAO,CAAEA,CAAA,GAAMV,eAAe,CAACH,GAAG,CAAE,CAAAK,QAAA,cAEpClB,IAAA,MAAGiB,SAAS,CAAC,aAAa,CAAI,CAAC,CACzB,CACT,EACE,CAAC,GAzBCJ,GAAG,CAACE,MA0BT,CACL,CAAC,CACA,CAAC,EACF,CAAC,CAEV,CAAC,CAED,cAAe,CAAAZ,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}